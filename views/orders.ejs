<%- include('./partials/header') %>


<% if(error.length>0){ %>
    <div class="absolute top-5 left-1/2 -translate-x-1/2 -translate-y-1/2 p-3 rounded-md bg-red-500">
        <span class="inline-block mt-1 mb-1 text-white">
            <%= error %>
        </span>
    </div>
    <% } %>

    <% if(message.length>0){ %>
        <div class="absolute top-5 left-1/2 -translate-x-1/2 -translate-y-1/2 p-3 rounded-md bg-green-500">
            <span class="inline-block mt-1 mb-1 text-white">
                <%= message %>
            </span>
        </div>
        <% } %>


            
      

<div class="w-full h-screen flex items-start px-20 py-20">
    <%- include('./partials/sidenavuser') %>
    <div class="w-3/4 h-screen flex flex-col justify-around items-start px-20 py-20 gap-10 ">

        
        <% if (user.order == undefined || user.order.length ===0  ) { %>
            <h1 class="text-xl text-center w-full">You Dont Have Any Orders</h1>
            
       <%  } else { %>
        <% user.order.reverse().forEach(order => { %>

            <% 
                var status_color =(order.status.toLowerCase() ==='delivered')?status_color ="bg-green-400 text-white" :"bg-yellow-400 text-zinc-700" 
                var order_color = (order.payment.toLowerCase() ==='paid' && order.status.toLowerCase() ==='delivered') ? "bg-zinc-200  ":"bg-white "
                var pay_color = (order.payment.toLowerCase() ==='paid') ? "bg-green-400 text-white":"bg-red-400 "
            
            %>
             <div class="w-full flex items-center justify-around  <%=order_color %>  flex-row p-3  border-solid border-2 ">
                <div class="flex-col w-2/3">
                <div class=" infos flex mt-2 text-xl w-2/3 gap-10">
                    <h4 class="">Order no.</h4>
                    <h4><%= order._id %></h4>
                </div>
                <% const date = order.date;
                const options = { year: 'numeric', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                const formattedDate = date.toLocaleString('en-US', options).replace(',', '');
                 %>
                 <div class="flex text-xl mt-2 w-2/3  gap-10 ">
                    <h4 class="">Date and Time</h4>
                    <h4><%= formattedDate %></h4>
                </div>
                <div class="flex text-xl mt-2 w-2/3  gap-10 ">
                    <h4 class="">No. of items</h4>
                    <h4><%= order.itemcount %></h4>
                </div>
               

             </div>

                <div class="flex flex-col  h-1/2 justify-center <%=status_color %>  items-center ">
                    <h1 class="box  p-3  ">Status: <%= order.status %></h1>
                </div>

                <div class="flex flex-col  h-1/2 justify-center <%=pay_color %>  items-center ">
                    <h1 class="box   p-3  ">Payment: <%= order.payment %></h1>
                </div>


            


            </div>
               
            
        
        
<% }); %>
<%   } %>
    </div>

    <div class="items fixed top-20 right-0 h-3/4 gap-5 m-4  border-5  flex  w-1/4">
    
        
    </div>
   
    <%- include('./partials/footer') %>